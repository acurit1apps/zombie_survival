<html>
  <head>
    <title>My page title</title>
    <style>
    #zombie_map {
      width: 100%;
      height: 100%;
      left: 0;
      position: absolute;
      top: 0;
      background-color: grey;
     }
     </style>
  </head>
  <body>
    My zombie map
    <div id="zombie_map"></div>
    <script>
    	var zombie_map;
	var old_position;
	var all_markers = []
	var data = `44.274745277401976 -70.54531460845949 zombie.png
	  44.275175459544656 -70.54617291534426 weapons.png
	  44.274991096154814 -70.54728871429445 hospital.png
	  43.65333784434727 -70.27563571929932 elsa.png
	  43.65331119145109 -70.27603180489349 anna.png
	  43.65332283540028 -70.27579577050018 olaf.png
	  43.65363333987926 -70.27625174603271 castle.png
	  43.65284543163212 -70.27656288227844 castle.png
	  43.65351690088778 -70.27503402313995 castle.png
	  `
	var markers = data.split("\n");
    	function initMap() {

            	     zombie_map = new google.maps.Map(document.getElementById('zombie_map'), {
            	     zoom: 18,
       		     
		     center: {lat: 43.6534548, lng: -70.276123}
		     
        	});
		
		
		for(var i=0; i < markers.length; i++){
		  var marker_data = markers[i].trim();
		  marker_data = marker_data.split(" ");
		  var lat = marker_data[0];
		  var lng = marker_data[1];
		  var emoji = marker_data[2];
		  var marker_position = new google.maps.LatLng(lat, lng);
		  var marker = new google.maps.Marker({
		    position: marker_position,
		    map: zombie_map,
		    icon: emoji
		  });
		  all_markers.push(marker);
		}
		
		if(navigator.geolocation) {
		  navigator.geolocation.watchPosition(set_my_position);
		}
		else {
		  alert("Geolocation doesn't work in your browser");
		}
		
    	}
	function set_my_position(position) {
	  if(old_position){
	    old_position.setMap(null);
	  }
	  var pos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
	  var marker = new google.maps.Marker({
	    position: pos,
	    map: zombie_map,
	    icon: "princess.png"
	  });
	  zombie_map.setCenter(pos);
	  old_position = marker;
	}
	</script>
	<script async defer
	  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAe-IRagOX1D2gzMpK14jSIQ0rY4Y6tQ-8&callback=initMap">
	</script>
  </body>
</html>
